generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
  engineType  = "client" 
}

datasource db {
  provider = "postgresql"
}

enum TicketCategory {
  BILLING
  TECHNICAL
  FEATURE_REQUEST
}

enum TicketUrgency {
  HIGH
  MEDIUM
  LOW
}

enum TicketStatus {
  PENDING
  TRIAGED
  RESOLVED
  FAILED
}

model Ticket {
  id            String         @id @default(uuid(7))
  customerName  String         @map("customer_name")
  customerEmail String         @map("customer_email")
  subject       String
  message       String
  category      TicketCategory?
  sentiment     Int?
  urgency       TicketUrgency?
  aiDraft       String?        @map("ai_draft")
  agentDraft    String?        @map("agent_draft")
  status        TicketStatus   @default(PENDING)
  triageError   String?        @map("triage_error")
  createdAt     DateTime       @default(now()) @map("created_at")
  updatedAt     DateTime       @updatedAt @map("updated_at")

  @@map("tickets")
}
